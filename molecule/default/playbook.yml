---
- name: Converge
  hosts: all
  vars:
    python_virtualenv_root: /tmp/venv
    python_virtualenvs:
      - name: sample
        recreate: false
        python: /usr/bin/python3
        site_packages: false
        packages:
          - lxml
          - dnspython

  tasks:

    - name: Update APT cache
      apt:
        update_cache: yes
        cache_valid_time: 900
      become: yes
      when: ansible_os_family == 'Debian'

    - name: "Include ansible-role-python"
      include_role:
        name: "ansible-role-python"
